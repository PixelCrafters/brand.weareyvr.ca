// ==================== alerts.less

a.alert-link {
	.alert-success & {
		.fancy-underline(@state-success-bg; fadeout(@state-success-text,30%));
	}
	.alert-info & {
		.fancy-underline(@state-info-bg; fadeout(@state-info-text,30%));
	}
	.alert-warning & {
		.fancy-underline(@state-warning-bg; fadeout(@state-warning-text,30%));
	}
	.alert-danger & {
		.fancy-underline(@state-danger-bg; fadeout(@state-danger-text,30%));
	}
}

// ==================== badges.less

.badge {
	.font-feature-settings("lnum" 1);
	.font-smoothing;
	padding-top: 4px;
}

// ==================== breadcrumbs.less

.breadcrumb {
	a {
		.fancy-underline(@breadcrumb-bg);
	}
}

// ==================== buttons.less

@btn-border-colour: fadeout(mix(@brand-primary, white),10%);
@btn-border: 1px solid @btn-border-colour;

.btn {

	&:not(.btn-link) {
		border-width: 1px;
		border-style: solid;
		font-family: @font-family-sans-serif;
		font-weight: bold;
		-webkit-font-smoothing: antialiased;
		.wr-transition(box-shadow);
		.wr-transition(text-shadow);
		.wr-transition(color);
		.wr-transition(background-color);
		.wr-transition(border-color);
		.font-feature-settings("lnum" 1);

		&:hover {
			text-shadow: 0 0 10px @btn-primary-color;
			.wr-transition(box-shadow);
			.wr-transition(text-shadow);
			.wr-transition(color);
			.wr-transition(background-color);
			.wr-transition(border-color);
		}
		
		&:active,
		&.active {
			color: @btn-primary-color;
			.btn-active-box-shadow;
			.wr-transition(box-shadow);
			.wr-transition(text-shadow);
			.wr-transition(color);
			.wr-transition(background-color);
			.wr-transition(border-color);
			border-color: @btn-active-box-shadow-colour;
		}
	}

	&-default {
		background-color: fadeout(mix(@brand-primary,@btn-primary-color,15%),10%);
		color: @brand-primary;
		border-color: fadeout(mix(@brand-primary,@btn-primary-color,50%),50%);

		&:hover {
			border-color: fadeout(@brand-primary,15%);
			color: @brand-primary;
			background-color: fadeout(mix(@brand-primary,@btn-primary-color,5%),10%);
		}

		&:active,
		&.active {
			background-color: mix(@brand-primary,@btn-primary-color);
		}

		.btn-group > & + &.dropdown-toggle {
			margin-left: -1px;
		}

		.wr-navbar-btn-variant(@navbar-border-color: fadeout(@brand-primary,70%));

		.wr-navbar &.btn {
			&:hover {
				color: @brand-primary;
				background-color: fadeout(@brand-primary,70%);
			}
		}
	}

	&-primary {
		.wr-btn-variant();
	}

	&-success {
		.wr-btn-variant(@btn-success-bg,@btn-success-border);
	}

	&-info {
		.wr-btn-variant(@btn-info-bg,@btn-info-border);
	}

	&-warning {
		.wr-btn-variant(@btn-warning-bg,@btn-warning-border);
	}

	&-danger {
		.wr-btn-variant(@btn-danger-bg,@btn-danger-border);
	}
}

.btn-group {

	&,
	&-vertical,
	&-justified {
		// background-color: @btn-border-colour;
		border-radius: @border-radius-base;

		&.btn-group-lg {
			border-radius: @border-radius-large;
		}
	}

	> .btn + .btn,
	> .btn-group + .btn,
	> .btn + .btn-group,
	> .btn-group + .btn-group {
	    margin: 0 0 0 1px;
	}

	&-vertical {

		> .btn + .btn,
		> .btn-group + .btn,
		> .btn + .btn-group,
		> .btn-group + .btn-group {
		    margin: 1px 0 0 0;
		}

		&.text-left .btn {
			text-align: left;
		}

		&.text-right .btn {
			text-align: right;
		}
	}

	&-justified {
		border-spacing: 1px 0;
		// #gradient > .horizontal-four-colors(@brand-primary; @btn-border-colour;3%; @btn-border-colour;97%; @brand-primary);
	}
}

.open.btn-group,
.open.btn-group-vertical,
.open.btn-group-justified {
	> .btn.dropdown-toggle {
		.btn-active-box-shadow;
		color: @btn-primary-color;
		// background-color: fadeout(@brand-primary,10%);
		background-color: @brand-primary;

		&:hover {
			text-shadow: none;
		}
	}

	.dropup & {
		.dropdown-toggle,
		.dropdown-toggle:active,
		.dropdown-toggle.active {
			box-shadow: 0 -5em 1px 0 rgba(0,0,0,0.5) inset; // reverse direction of transition
		}
	}
}

.open.btn-group {
	> .btn.dropdown-toggle {
		border: 1px solid rgba(0,0,0,0.5)
	}
}

// ==================== dropdowns.less

.dropdown-menu {
	.font-smoothing;
	box-shadow: none;
	border-style: none;
	.wr-transition(display);

	.divider {
		margin: ((@line-height-computed / 3) - 1px) 0;
	}
}

// .dropdown-header {
// 	.sans-serif-small-caps;
// 	font-weight: bold;
// 	font-size: (@font-size-small * 0.9);
// }

// ==================== forms.less

.form-control,
.input-group-addon {
	background-color: fadeout(@gray-lighter,30%);
	border-color: transparent;
	box-shadow: none;
	.wr-transition(background-color);
	.wr-transition(border-color);
	.wr-transition(color);
	.wr-transition(box-shadow);
	.placeholder(fadeout(@grey-light,10%));
	color: @grey-darker;

	&:focus {
		background-color: fadeout(@input-bg,10%);
		// .box-shadow(0 0 5px fadeout(@brand-primary,60%));
		box-shadow: none;
		border-style: solid;
		// border-color: fadeout(@gray-lighter,10%);
		border-color: fadeout(@brand-primary,30%);
		.wr-transition(background-color);
		.wr-transition(border-color);
		.wr-transition(color);
		.wr-transition(box-shadow);
	}
}

.form-control {
	.font-smoothing;
}

input[type="search"] {
	border-radius: (@input-height-base / 2); // round ends

	&.input-lg {
		border-radius: (@input-height-large / 2);
	}

	&.input-sm {
		border-radius: (@input-height-small / 2);
	}
}

// textarea {
// 	.serif;
// 	font-size: @font-size-base;
// 	-webkit-font-smoothing: subpixel-antialiased;
// }

// ==================== glyphicons.less

.glyphicon {
	// font-size: 85%;
	top: 3px;

	.btn & {
		opacity: 0.85;
	}
}

// ==================== grid.less

@row-gutter-height: ceil((@grid-gutter-width * 1.5));

// .make-row {
// 	&:first-of-type {
// 		padding-top: @row-gutter-height;
// 	}
// }

section.row,
section,
main.row {
	padding: @row-gutter-height*0.25 0 @row-gutter-height;
}

section.row {
	border-top: 1px solid @gray-lighter;

	&:first-of-type {
		border-top-style: none;
	}

	&:last-of-type {
		padding-bottom: @row-gutter-height;
	}

	+ main.row {
		border-top: 1px solid @gray-lighter;
	}
}

// ==================== input-groups.less

.input-group {

	> .input-group-btn {

		> .btn,
		> .btn-group {
			margin: 0;

			&:hover {
				margin: 0;
			}
		}

		// &:not(:first-child) .btn,
		// &:not(:first-child) .btn-group,
		// &:first-child .btn:not(:first-child),
		// &:first-child .btn-group:not(:first-child)
		> .btn:not(:first-child),
		> .btn-group:not(:first-child) {
			border-left: @btn-border;
		}

		// for buttons immediately following text boxes
		&:first-of-type:not(:first-child) .btn:first-of-type,
		&:first-of-type:not(:first-child) .btn-group:first-of-type {
			margin-left: 1px;
			border-left-style: none;
		}

		// for buttons immediately preceding text boxes
		&:last-of-type:not(:last-child) .btn:last-of-type,
		&:last-of-type:not(:last-child) .btn-group:last-of-type {
			margin-right: 1px;
			border-right-style: none;
		}
	}

	> .input-group-addon {
		background-color: fadeout(@gray-light, 50%);
	}

	.form-horizontal & {
		width: 100%;
	}

	input.form-control:not(:only-of-type) {

		border-radius: 0; // reset border radii
		margin: 0;

		&:first-of-type {
			.border-top-radius(@border-radius-base);
		}

		&:not(:first-of-type):not(:last-of-type) {
			margin-left: 1px;
			margin-right: 1px;
		}

		&:not(:last-of-type) {
			margin-bottom: 2px;

			&:focus {
				z-index: 10; // fix for focus highlighting
			}
		}

		&:last-of-type {
			.border-bottom-radius(@border-radius-base);
		}
	}
}

// ==================== labels.less

.label {
	padding-top: 0.25em;
	padding-bottom: 0.25em;
}

// ==================== navbar.less

body>.navbar+* {
	margin-top: 0;
}

body>.navbar.affix+* {
	margin-top: (@navbar-height * 2);
}

// body>.navbar+.jumbotron {
// 	padding-top: (@navbar-height * 4);
// 	height: 500px + (@navbar-height * 4);
// }

.navbar-inverse input {
	.input-inverse;
}

// ==================== navs.less

.nav-pills {

	&,
	& .nav {

		.sans-serif-small-caps;
		font-weight: bold;
		font-size: @font-size-small;
		-webkit-font-smoothing: antialiased;
		line-height: 1;

		> li {

			// white-space: nowrap;

			> a {
				.wr-transition(background-color);
				border-radius: @nav-pills-border-radius;

				&:link,
				&:hover,
				&:visited {
					color: @grey-light;
				}

				&:active,
				&.active {
					background-color: fadeout(@brand-primary, 70%);

					&:link,
					&:hover,
					&:visited {
						color: #fff;
					}
				}

				> .wr-icon {
					vertical-align: text-bottom;
					margin: 0 0.5em 0 0;
				}
			}

			&.active > a {
				border-color: @nav-pills-active-link-hover-bg;
			}

			small,
			.small {
				font-weight: normal;
				font-size: 1em;
			}
		}

		.nav {
			margin: @nav-link-padding;
			margin-top: 0;
			margin-bottom: 0;
		}
	}
}

.wr-nav-vertical {
	.nav-pills;
	.nav-stacked;
}

// ==================== pagination.less

.pagination {
	.tabular-lining;
}

// ==================== panels.less

.panel {
	margin: (@line-height-computed / 2) 0;
	.box-shadow(none);
}

// ==================== progress-bars.less

.progress {
	box-shadow: none;

	* {
		box-shadow: none;
	}

	.progress-bar {
		text-align: right;
		font-weight: bold;
		padding-right: 0.5em;
		.font-feature-settings("lnum" 1);
		.font-smoothing;
	}
}

// ==================== scaffolding.less

::selection {
	background: fadeout(@brand-primary, 70%);
}

::-moz-selection {
	background: fadeout(@brand-primary, 70%);
}

a,
.btn.btn-link {

	&:link,
	&:visited,
	&:hover,
	&:active {
		text-decoration: none;
		.wr-transition(color);
		.wr-transition(background-color);
	}

	&:visited {
		color: lighten(desaturate(@link-color,43%),18%);
	}

	&:visited:hover {
		color: @link-hover-color;
	}

	p &,
	&.link {
	// .row & {
		.fancy-underline(@body-bg);
	}
}

a.btn {
	text-shadow: none;
}

// ==================== tooltip.less

.tooltip {
	.font-smoothing(subpixel-antialiased) !important; // eliminate antialiasing change while animating
}

// ==================== type.less

@font-size-serif-adjust: 106.25%;
@font-size-sans-adjust: percentage(100/@font-size-serif-adjust);

.serif {

	a:not(:hover) { // for fancy underlines
		background-position: 0 88%;
	}

	p & {
		font-size: @font-size-serif-adjust;
		line-height: @font-size-sans-adjust;
	}

	.sans-serif {
		font-size: @font-size-sans-adjust;
		line-height: @font-size-serif-adjust;
	}

	h1 &, .h1 &, h1&, .h1&,
	h2 &, .h2 &, h2&, .h2&,
	h3 &, .h3 &, h3&, .h3&,
	h4 &, .h4 &, h4&, .h4& {
		.font-feature-settings("lnum" 1);
	}
}

h1, .h1,
h2, .h2,
h3, .h3,
h4, .h4 {
	.hero-type();
}

@font-size-lead: ceil((@font-size-base * 1.9));

.lead {

	.hero-type();

	font-weight: normal;
	font-size: (@font-size-lead / 1.3);
	line-height: @line-height-large;
	margin-top: ((@font-size-lead * @line-height-large) / 2);
	margin-bottom: ((@font-size-lead * @line-height-large) / 2);

	&:first-child {
		margin-top: 0;
	}

	@media (min-width: @screen-sm-min) {
		font-size: @font-size-lead;
	}
}

p,
li,
dt,
dd,
blockquote {
	max-width: 45em; // prevent lines from getting too long
}

blockquote {

	position: relative;

	&:after {
		content: "\201C";
		line-height: 0;
		color: @blockquote-border-color;
		.font-smoothing;
		font-size: ceil(@blockquote-font-size * 6);
		.serif;
		position: absolute;
		left: -0.05em;
		top: 0.45em;
	}

	border-left-style: none;
	padding-left: ceil(@blockquote-font-size * 2.5);

	&.blockquote-reverse {
		&:after {
			content: "\201D";
			right: -0.05em;
		}

		border-right-style: none;
		padding-right: ceil(@blockquote-font-size * 2.5);
	}
}

ol:not(.list-unstyled):not(.breadcrumb) {
	counter-reset: li;
	list-style: none;

	> li {
		position: relative;

		&:before {
			@ol-counter-width: 2em;

		    content: counter(li) ".";
		    counter-increment: li;
		    position: absolute;
		    left: (-(@ol-counter-width) - 0.5em);
			margin: 0;
		    display: inline-block;
		    width: @ol-counter-width;
		    text-align: right;
		    color: @grey-light;
		    font-weight: bold;
		    .font-smoothing;
		    .tabular-lining;
		}
	}
}